
/* ---------------------------------------------------- */
/*  Generated by Enterprise Architect Version 13.5 		*/
/*  Created On : 16-sep.-2024 23:43:16 				*/
/*  DBMS       : SQL Server 2012 						*/
/* ---------------------------------------------------- */

/* Drop Foreign Key Constraints */

IF EXISTS (SELECT 1 FROM dbo.sysobjects WHERE id = object_id(N'[FK_TBL_Actividad_TBL_Usuario]') AND OBJECTPROPERTY(id, N'IsForeignKey') = 1) 
ALTER TABLE [TBL_Actividad] DROP CONSTRAINT [FK_TBL_Actividad_TBL_Usuario]
GO

IF EXISTS (SELECT 1 FROM dbo.sysobjects WHERE id = object_id(N'[FK_TBL_Listado_Estudiante_TBL_Actividad]') AND OBJECTPROPERTY(id, N'IsForeignKey') = 1) 
ALTER TABLE [TBL_Listado_Estudiante] DROP CONSTRAINT [FK_TBL_Listado_Estudiante_TBL_Actividad]
GO

IF EXISTS (SELECT 1 FROM dbo.sysobjects WHERE id = object_id(N'[FK_TBL_Listado_Estudiante_TBL_Estudiante]') AND OBJECTPROPERTY(id, N'IsForeignKey') = 1) 
ALTER TABLE [TBL_Listado_Estudiante] DROP CONSTRAINT [FK_TBL_Listado_Estudiante_TBL_Estudiante]
GO

IF EXISTS (SELECT 1 FROM dbo.sysobjects WHERE id = object_id(N'[FK_TBL_Lugar_TBL_Actividad]') AND OBJECTPROPERTY(id, N'IsForeignKey') = 1) 
ALTER TABLE [TBL_Lugar] DROP CONSTRAINT [FK_TBL_Lugar_TBL_Actividad]
GO

IF EXISTS (SELECT 1 FROM dbo.sysobjects WHERE id = object_id(N'[FK_TBL_Notificacion_TBL_Listado_Estudiante]') AND OBJECTPROPERTY(id, N'IsForeignKey') = 1) 
ALTER TABLE [TBL_Notificacion] DROP CONSTRAINT [FK_TBL_Notificacion_TBL_Listado_Estudiante]
GO

IF EXISTS (SELECT 1 FROM dbo.sysobjects WHERE id = object_id(N'[FK_TBL_Responsable_TBL_Actividad]') AND OBJECTPROPERTY(id, N'IsForeignKey') = 1) 
ALTER TABLE [TBL_Responsable] DROP CONSTRAINT [FK_TBL_Responsable_TBL_Actividad]
GO

IF EXISTS (SELECT 1 FROM dbo.sysobjects WHERE id = object_id(N'[FK_TBL_Tipo_Actividad_TBL_Actividad]') AND OBJECTPROPERTY(id, N'IsForeignKey') = 1) 
ALTER TABLE [TBL_Tipo_Actividad] DROP CONSTRAINT [FK_TBL_Tipo_Actividad_TBL_Actividad]
GO

/* Drop Tables */

IF EXISTS (SELECT 1 FROM dbo.sysobjects WHERE id = object_id(N'[TBL_Actividad]') AND OBJECTPROPERTY(id, N'IsUserTable') = 1) 
DROP TABLE [TBL_Actividad]
GO

IF EXISTS (SELECT 1 FROM dbo.sysobjects WHERE id = object_id(N'[TBL_Estudiante]') AND OBJECTPROPERTY(id, N'IsUserTable') = 1) 
DROP TABLE [TBL_Estudiante]
GO

IF EXISTS (SELECT 1 FROM dbo.sysobjects WHERE id = object_id(N'[TBL_Listado_Estudiante]') AND OBJECTPROPERTY(id, N'IsUserTable') = 1) 
DROP TABLE [TBL_Listado_Estudiante]
GO

IF EXISTS (SELECT 1 FROM dbo.sysobjects WHERE id = object_id(N'[TBL_Lugar]') AND OBJECTPROPERTY(id, N'IsUserTable') = 1) 
DROP TABLE [TBL_Lugar]
GO

IF EXISTS (SELECT 1 FROM dbo.sysobjects WHERE id = object_id(N'[TBL_Notificacion]') AND OBJECTPROPERTY(id, N'IsUserTable') = 1) 
DROP TABLE [TBL_Notificacion]
GO

IF EXISTS (SELECT 1 FROM dbo.sysobjects WHERE id = object_id(N'[TBL_Responsable]') AND OBJECTPROPERTY(id, N'IsUserTable') = 1) 
DROP TABLE [TBL_Responsable]
GO

IF EXISTS (SELECT 1 FROM dbo.sysobjects WHERE id = object_id(N'[TBL_Tipo_Actividad]') AND OBJECTPROPERTY(id, N'IsUserTable') = 1) 
DROP TABLE [TBL_Tipo_Actividad]
GO

IF EXISTS (SELECT 1 FROM dbo.sysobjects WHERE id = object_id(N'[TBL_Usuario]') AND OBJECTPROPERTY(id, N'IsUserTable') = 1) 
DROP TABLE [TBL_Usuario]
GO

/* Create Tables */

CREATE TABLE [TBL_Actividad]
(
	[ID_Actividad] int NOT NULL IDENTITY (1, 1),
	[Nombre_Actividad] varchar(50) NOT NULL,
	[Tipo_Convalidacion] varchar(50) NOT NULL,
	[Descripcion] text NULL,
	[Fecha] date NOT NULL,
	[Hora_Inicio] time(7) NOT NULL,
	[Hora_Fin] time(7) NOT NULL,
	[Estado] bit NOT NULL,
	[Cupo] int NOT NULL,
	[ID_Usuario] int NULL
)
GO

CREATE TABLE [TBL_Estudiante]
(
	[CIF] int NOT NULL,
	[Nombre1] varchar(25) NOT NULL,
	[Apellido1] varchar(25) NOT NULL,
	[Nombre2] varchar(25) NULL,
	[Apellido2] varchar(25) NULL,
	[Carrera] varchar(100) NOT NULL,
	[Correo_Electronico] varchar(40) NULL,
	[Numero_Telefonico] bigint NOT NULL
)
GO

CREATE TABLE [TBL_Listado_Estudiante]
(
	[ID_Listado] int NOT NULL IDENTITY(1,1),
	[Convalidacion] varchar(50) NOT NULL,
	[Necesidad_Transporte] bit NOT NULL,
	[Asistencia] bit NOT NULL,
	[ID_Actividad] int NULL,
	[CIF] int NULL
)
GO

CREATE TABLE [TBL_Lugar]
(
	[ID_Espacio] int NOT NULL IDENTITY (1, 1),
	[Nombre_Lugar] varchar(50) NOT NULL,
	[Ubicacion] varchar(100) NOT NULL,
	[Capacidad] int NOT NULL,
	[ID_Actividad] int NULL
)
GO

CREATE TABLE [TBL_Notificacion]
(
	[ID_Notificacion] int NOT NULL IDENTITY (1, 1),
	[Fecha_Envio] date NOT NULL,
	[Mensaje] text NOT NULL,
	[ID_Listado] int NULL
)
GO

CREATE TABLE [TBL_Responsable]
(
	[ID_Responsable] int NOT NULL IDENTITY (1, 1),
	[Nombre1] varchar(25) NOT NULL,
	[Nombre2] varchar(25) NULL,
	[Apellido1] varchar(25) NOT NULL,
	[Apellido2] varchar(50) NULL,
	[Cargo] varchar(50) NULL,
	[Departamento] varchar(50) NULL,
	[Telefono] BIGint NULL,
	[Correo] varchar(40) NULL,
	[ID_Actividad] int NULL
)
GO

CREATE TABLE [TBL_Tipo_Actividad]
(
	[Tipo] varchar(50) NOT NULL,
	[ID_Actividad] int NULL
)
GO

CREATE TABLE [TBL_Usuario]
(
	[ID_Usuario] int NOT NULL IDENTITY (1,1),
	[Username] varchar(36) NOT NULL,
	[Contrasenia] varchar(36) NOT NULL,
	[Nombre] varchar(25) NOT NULL,
	[Apellido] varchar(25) NOT NULL
)
GO

/* Create Primary Keys, Indexes, Uniques, Checks */

ALTER TABLE [TBL_Actividad] 
 ADD CONSTRAINT [PK_Table1]
	PRIMARY KEY CLUSTERED ([ID_Actividad] ASC)
GO

ALTER TABLE [TBL_Actividad] 
 ADD CONSTRAINT [ENUMTipo_Convalidacion] CHECK (Tipo_Convalidacion IN ('Social','Cultural','Deportivo'))
GO

CREATE NONCLUSTERED INDEX [IXFK_TBL_Actividad_TBL_Usuario] 
 ON [TBL_Actividad] ([ID_Usuario] ASC)
GO

ALTER TABLE [TBL_Estudiante] 
 ADD CONSTRAINT [PK_Table2]
	PRIMARY KEY CLUSTERED ([CIF] ASC)
GO

ALTER TABLE [TBL_Estudiante] 
 ADD CONSTRAINT [ENUMCarrera] CHECK (Carrera IN ('Administración de Empresas','Arquitectura','Contabilidad y Finanzas','Derecho','Diplomacia y RRII','Economía Empresarial','Ingeniería Civil','Ingeniería Industrial','Ingeniería en Sistemas de Información','Marketing y Publicidad','Negocios Internacionales','Odontología','Medicina',
'Psicología','Diseño y Comunicación Visual','Comunicación y Relaciones Públicas','UAM | COLLEGE'))
GO

ALTER TABLE [TBL_Listado_Estudiante] 
 ADD CONSTRAINT [PK_Table3]
	PRIMARY KEY CLUSTERED ([ID_Listado] ASC)
GO

ALTER TABLE [TBL_Listado_Estudiante] 
 ADD CONSTRAINT [ENUMConvalidacion] CHECK (Convalidacion IN ('Social','Cultural','Deportivo'))
GO

CREATE NONCLUSTERED INDEX [IXFK_TBL_Listado_Estudiante_TBL_Actividad] 
 ON [TBL_Listado_Estudiante] ([ID_Actividad] ASC)
GO

CREATE NONCLUSTERED INDEX [IXFK_TBL_Listado_Estudiante_TBL_Estudiante] 
 ON [TBL_Listado_Estudiante] ([CIF] ASC)
GO

ALTER TABLE [TBL_Lugar] 
 ADD CONSTRAINT [PK_Table4]
	PRIMARY KEY CLUSTERED ([ID_Espacio] ASC)
GO

CREATE NONCLUSTERED INDEX [IXFK_TBL_Lugar_TBL_Actividad] 
 ON [TBL_Lugar] ([ID_Actividad] ASC)
GO

ALTER TABLE [TBL_Notificacion] 
 ADD CONSTRAINT [PK_Table5]
	PRIMARY KEY CLUSTERED ([ID_Notificacion] ASC)
GO

CREATE NONCLUSTERED INDEX [IXFK_TBL_Notificacion_TBL_Listado_Estudiante] 
 ON [TBL_Notificacion] ([ID_Listado] ASC)
GO

ALTER TABLE [TBL_Responsable] 
 ADD CONSTRAINT [PK_Table6]
	PRIMARY KEY CLUSTERED ([ID_Responsable] ASC)
GO

CREATE NONCLUSTERED INDEX [IXFK_TBL_Responsable_TBL_Actividad] 
 ON [TBL_Responsable] ([ID_Actividad] ASC)
GO

ALTER TABLE [TBL_Tipo_Actividad] 
 ADD CONSTRAINT [ENUMTipo] CHECK (Tipo IN ('Congreso','Charla','Taller','Conferencia','Feria'))
GO

CREATE NONCLUSTERED INDEX [IXFK_TBL_Tipo_Actividad_TBL_Actividad] 
 ON [TBL_Tipo_Actividad] ([ID_Actividad] ASC)
GO

ALTER TABLE [TBL_Usuario] 
 ADD CONSTRAINT [PK_Table7]
	PRIMARY KEY CLUSTERED ([ID_Usuario] ASC)
GO

/* Create Foreign Key Constraints */

ALTER TABLE [TBL_Actividad] ADD CONSTRAINT [FK_TBL_Actividad_TBL_Usuario]
	FOREIGN KEY ([ID_Usuario]) REFERENCES [TBL_Usuario] ([ID_Usuario]) ON DELETE No Action ON UPDATE No Action
GO

ALTER TABLE [TBL_Listado_Estudiante] ADD CONSTRAINT [FK_TBL_Listado_Estudiante_TBL_Actividad]
	FOREIGN KEY ([ID_Actividad]) REFERENCES [TBL_Actividad] ([ID_Actividad]) ON DELETE No Action ON UPDATE No Action
GO

ALTER TABLE [TBL_Listado_Estudiante] ADD CONSTRAINT [FK_TBL_Listado_Estudiante_TBL_Estudiante]
	FOREIGN KEY ([CIF]) REFERENCES [TBL_Estudiante] ([CIF]) ON DELETE No Action ON UPDATE No Action
GO

ALTER TABLE [TBL_Lugar] ADD CONSTRAINT [FK_TBL_Lugar_TBL_Actividad]
	FOREIGN KEY ([ID_Actividad]) REFERENCES [TBL_Actividad] ([ID_Actividad]) ON DELETE No Action ON UPDATE No Action
GO

ALTER TABLE [TBL_Notificacion] ADD CONSTRAINT [FK_TBL_Notificacion_TBL_Listado_Estudiante]
	FOREIGN KEY ([ID_Listado]) REFERENCES [TBL_Listado_Estudiante] ([ID_Listado]) ON DELETE No Action ON UPDATE No Action
GO

ALTER TABLE [TBL_Responsable] ADD CONSTRAINT [FK_TBL_Responsable_TBL_Actividad]
	FOREIGN KEY ([ID_Actividad]) REFERENCES [TBL_Actividad] ([ID_Actividad]) ON DELETE No Action ON UPDATE No Action
GO

ALTER TABLE [TBL_Tipo_Actividad] ADD CONSTRAINT [FK_TBL_Tipo_Actividad_TBL_Actividad]
	FOREIGN KEY ([ID_Actividad]) REFERENCES [TBL_Actividad] ([ID_Actividad]) ON DELETE No Action ON UPDATE No Action
GO


-- 10 registros para TBL_Usuario
INSERT INTO TBL_Usuario (Username, Contrasenia, Nombre, Apellido)
VALUES 
('usuario1', 'password1', 'Pedro', 'Ramirez'),
('usuario2', 'password2', 'Sofia', 'Gonzalez'),
('usuario3', 'password3', 'Luis', 'Martinez'),
('usuario4', 'password4', 'Ana', 'Lopez'),
('usuario5', 'password5', 'Jose', 'Garcia'),
('usuario6', 'password6', 'Marta', 'Hernandez'),
('usuario7', 'password7', 'Carlos', 'Diaz'),
('usuario8', 'password8', 'Elena', 'Perez'),
('usuario9', 'password9', 'Roberto', 'Torres'),
('usuario10', 'password10', 'Gabriela', 'Castillo');

-- 10 registros para TBL_Actividad
INSERT INTO TBL_Actividad (Nombre_Actividad, Tipo_Convalidacion, Descripcion, Fecha, Hora_Inicio, Hora_Fin, Estado, Cupo, ID_Usuario)
VALUES 
('Conferencia de Seguridad', 'Cultural', 'Evento sobre seguridad informática', '2024-09-30', '10:00:00', '12:00:00', 1, 100, 1),
('Taller de Robótica', 'Social', 'Taller para estudiantes de ingeniería', '2024-10-05', '09:00:00', '11:00:00', 1, 50, 2),
('Seminario de AI', 'Cultural', 'Discusión sobre inteligencia artificial', '2024-10-15', '11:00:00', '13:00:00', 1, 80, 3),
('Charla de Innovación', 'Social', 'Evento sobre innovación tecnológica', '2024-10-20', '14:00:00', '16:00:00', 1, 120, 4),
('Congreso de Tecnología', 'Deportivo', 'Congreso sobre avances tecnológicos', '2024-11-01', '08:00:00', '17:00:00', 1, 200, 5),
('Hackathon', 'Cultural', 'Competencia de desarrollo de software', '2024-11-05', '09:00:00', '18:00:00', 1, 60, 6),
('Simposio de IoT', 'Social', 'Evento sobre Internet of Things', '2024-11-10', '10:00:00', '13:00:00', 1, 100, 7),
('Feria de Ciencias', 'Cultural', 'Exposición de proyectos de ciencia', '2024-11-20', '09:00:00', '15:00:00', 1, 150, 8),
('Taller de Blockchain', 'Deportivo', 'Aprende sobre tecnología blockchain', '2024-11-25', '10:00:00', '13:00:00', 1, 70, 9),
('Encuentro de Startups', 'Social', 'Networking entre startups', '2024-12-01', '11:00:00', '14:00:00', 1, 90, 10);

-- 10 registros para TBL_Tipo_Actividad
INSERT INTO TBL_Tipo_Actividad (Tipo, ID_Actividad)
VALUES 
('Congreso', 1),
('Taller', 2),
('Conferencia', 3),
('Charla', 4),
('Congreso', 5),
('Taller', 6),
('Congreso', 7),
('Charla', 8),
('Taller', 9),
('Congreso', 10);

-- 10 registros para TBL_Estudiante
INSERT INTO TBL_Estudiante (CIF, Nombre1, Apellido1, Nombre2, Apellido2, Carrera, Correo_Electronico, Numero_Telefonico)
VALUES 
(12345, 'Juan', 'Perez', 'Carlos', 'Rodriguez', 'Ingeniería en Sistemas de Información', 'juan.perez@example.com', 1234567890),
(67890, 'Ana', 'Martinez', NULL, NULL, 'Psicología', 'ana.martinez@example.com', 9876543210),
(11121, 'Luis', 'Sanchez', 'Eduardo', 'Lopez', 'Ingeniería Civil', 'luis.sanchez@example.com', 1230984567),
(54321, 'Maria', 'Torres', 'Luisa', 'Diaz', 'Medicina', 'maria.torres@example.com', 8765432109),
(98765, 'Carlos', 'Gutierrez', 'Andres', 'Vega', 'Economía Empresarial', 'carlos.gutierrez@example.com', 6543210987),
(33344, 'Sofia', 'Garcia', 'Lucia', 'Fernandez', 'Arquitectura', 'sofia.garcia@example.com', 9087654321),
(55566, 'Jose', 'Ramirez', 'Pedro', 'Gomez', 'Negocios Internacionales', 'jose.ramirez@example.com', 9876541230),
(77788, 'Marta', 'Diaz', 'Clara', 'Perez', 'Diseño y Comunicación Visual', 'marta.diaz@example.com', 8765432198),
(22233, 'Roberto', 'Gonzalez', 'Santiago', 'Hernandez', 'Ingeniería Industrial', 'roberto.gonzalez@example.com', 7654321987),
(88899, 'Gabriela', 'Castillo', 'Elena', 'Martinez', 'Contabilidad y Finanzas', 'gabriela.castillo@example.com', 6543219876);

-- 10 registros para TBL_Listado_Estudiante
INSERT INTO TBL_Listado_Estudiante (Convalidacion, Necesidad_Transporte, Asistencia, ID_Actividad, CIF)
VALUES 
('Cultural', 0, 1, 1, 12345),
('Social', 1, 0, 2, 67890),
('Deportivo', 0, 1, 3, 11121),
('Cultural', 1, 1, 4, 54321),
('Social', 0, 0, 5, 98765),
('Cultural', 1, 1, 6, 33344),
('Deportivo', 0, 1, 7, 55566),
('Cultural', 1, 0, 8, 77788),
('Social', 0, 1, 9, 22233),
('Deportivo', 1, 0, 10, 88899);

-- 10 registros para TBL_Lugar
INSERT INTO TBL_Lugar (Nombre_Lugar, Ubicacion, Capacidad, ID_Actividad)
VALUES 
('Auditorio Central', 'Edificio A', 200, 1),
('Laboratorio de Robótica', 'Edificio B', 50, 2),
('Sala de Conferencias', 'Edificio C', 80, 3),
('Aula Magna', 'Edificio D', 120, 4),
('Centro de Convenciones', 'Edificio E', 300, 5),
('Laboratorio de Innovación', 'Edificio F', 60, 6),
('Sala de IoT', 'Edificio G', 100, 7),
('Pabellón de Ciencias', 'Edificio H', 150, 8),
('Laboratorio de Blockchain', 'Edificio I', 70, 9),
('Salón de Startups', 'Edificio J', 90, 10);

-- 10 registros para TBL_Notificacion
INSERT INTO TBL_Notificacion (Fecha_Envio, Mensaje, ID_Listado)
VALUES 
('2024-09-20', 'Recordatorio del evento de seguridad', 1),
('2024-09-21', 'Inscripción confirmada para el taller de robótica', 2),
('2024-09-22', 'Confirmación de asistencia al seminario de AI', 3),
('2024-09-23', 'Charla de innovación programada', 4),
('2024-09-24', 'Congreso de tecnología próximo', 5),
('2024-09-25', 'Hackathon disponible para inscripción', 6),
('2024-09-26', 'Simposio de IoT en breve', 7),
('2024-09-27', 'Feria de ciencias lista', 8),
('2024-09-28', 'Taller de blockchain confirmado', 9),
('2024-09-29', 'Encuentro de startups agendado', 10);

-- 10 registros para TBL_Responsable
INSERT INTO TBL_Responsable (Nombre1, Nombre2, Apellido1, Apellido2, Cargo, Departamento, Telefono, Correo, ID_Actividad)
VALUES 
('Carlos', NULL, 'Gomez', 'Lopez', 'Coordinador', 'Seguridad Informática', 1234567890, 'carlos.gomez@example.com', 1),
('Maria', 'Luisa', 'Hernandez', NULL, 'Jefa', 'Ingeniería', 9876543210, 'maria.hernandez@example.com', 2),
('Jose', 'Manuel', 'Diaz', 'Vargas', 'Director', 'AI', 8765432109, 'jose.diaz@example.com', 3),
('Ana', 'Claudia', 'Perez', 'Santos', 'Líder', 'Innovación', 6543210987, 'ana.perez@example.com', 4),
('Luis', 'Felipe', 'Martinez', 'Castro', 'Organizador', 'Tecnología', 5432109876, 'luis.martinez@example.com', 5),
('Sofia', 'Andrea', 'Garcia', 'Mendoza', 'Coordinadora', 'Desarrollo', 4321098765, 'sofia.garcia@example.com', 6),
('Roberto', 'Carlos', 'Torres', 'Gomez', 'Especialista', 'IoT', 3210987654, 'roberto.torres@example.com', 7),
('Elena', 'Gabriela', 'Diaz', 'Ramirez', 'Supervisora', 'Ciencias', 2109876543, 'elena.diaz@example.com', 8),
('Pedro', 'Rafael', 'Gutierrez', 'Sanchez', 'Encargado', 'Blockchain', 1098765432, 'pedro.gutierrez@example.com', 9),
('Gabriela', 'Luisa', 'Castillo', 'Fernandez', 'Directora', 'Startups', 1987654321, 'gabriela.castillo@example.com', 10);






Select * FROM TBL_Usuario;

SELECT * FROM TBL_Actividad;

SELECT * FROM TBL_Estudiante

SELECT * FROM TBL_Listado_Estudiante

SELECT * FROM TBL_Lugar

SELECT * FROM TBL_Notificacion

SELECT * FROM TBL_Responsable

SELECT * FROM TBL_Tipo_Actividad

Insert into TBL_Tipo_Actividad(Tipo,ID_Actividad)
Values
('Kermese', 10);
